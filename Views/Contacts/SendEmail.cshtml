@model AmeriForce.Models.Contacts.ContactSendEmailMessageViewModel

<script src="~/jQuery/jQueryValidation.js"></script>
<script src="~/jQuery/jQuery_ClientFunctions.js"></script>


<link href="~/Content/ContactStyleSheet.css" rel="stylesheet" />

<nav aria-label="breadcrumb" align="right">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="@Url.Action("Index", "Contacts" )">Contacts</a></li>
        <li class="breadcrumb-item active" aria-current="page">
            Send Email to Contact
        </li>
    </ol>
</nav>

<div style="border:0px solid #333;">

    <div id="sendEmailSuccess" name="sendEmailSuccess" class="alert alert-success alert-dismissible" role="alert">
        <strong>Email sent successfully!</strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>


    <div class="container mainPageBody" style="border:1px solid #333;background-color:#fff;">


        <div class="row contactHeader">
            <div class="col-lg-6" align="left">
                <div style="border:0px solid black;">
                    <table align="left">
                        <tr>
                            <td valign="middle" style="border:1px solid #fff;padding:10px;">
                                <i class="fa fa-envelope" style="font-size:48px;"></i>
                            </td>
                            <td class="leftTextAlign" style="border:1px solid #fff;padding:10px;">
                                <span class="overviewHeader dealAmount">
                                    Send Email
                                </span>
                                <br />
                                <span class="nameSubHeader gradeAReversed">
                                    Contact 
                                    @Model.ContactName
                                    @*@controller.GetClientName(Model.RelatedTo)*@
                                    <i>(@Model.RelatedTo.ToString())</i>
                                </span>
                                <br />
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="col-lg-3 dealAmount" align="center">
                &nbsp;
            </div>
            <div class="col-lg-1" align="center">
                &nbsp;
            </div>
            <div class="col-lg-2" align="center">

            </div>
        </div>

        <div class="row">
            <div class="col-lg-12 dividerTableBackground" style="height:3px;">
                &nbsp;
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12" style="padding:10px;background-color:#eee;" align="center">
                <a class="btn btn-primary btn-md disabled" href="#" name="btnUploadFile" id="btnUploadFile" data-toggle="modal" style="padding:5px;" data-target="#modalUploadClientFiles" disabled><i class="fa fa-file"></i> Select Template</a>
                <a class="btn btn-primary btn-md disabled" href="#" name="btnUploadFile" id="btnUploadFile" data-toggle="modal" style="padding:5px;" data-target="#modalUploadClientFiles" disabled><i class="fa fa-eye"></i> Preview</a>

            </div>
        </div>

        <div class="row">
            <div class="col-lg-12" style="padding:10px;" align="left">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 dividerTableBackground" style="height:3px;">
                            &nbsp;
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 workingSectionSubHeaderBackground">
                            <h2 class="subHeadingTitle"><i class="fa fa-file-signature"></i> Email Details</h2>
                        </div>
                    </div>

                    
                    @using (Html.BeginForm("SendEmail", "Contacts", FormMethod.Post, new { enctype = "multipart/form-data", @sendContactEmail = Model, @class = "form-horizontal", role = "form" }))
                    {
                        @Html.AntiForgeryToken()

                        <div class="form-horizontal">
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                            <div class="row">
                                <div class="col-lg-4" style="padding:5px;" align="left">

                                    @*FROM NAME*@
                                    <div class="input-group input-group-sm" style="margin-bottom:5px;">
                                        <div class="input-group-prepend">
                                        <span class="input-group-text input-sm" id="LabelFromName">From Name </span>
                                        <span class="input-group-text" id="IG_FromName" name="IG_FromName"></span>
                                        </div>
                                        <input type="text" id="FromName" name="FromName" class="form-control input-lg clientEntryTerms" maxlength="50" value="@Model.FromName" />
                                    </div>

                                    @*FROM ADDRESS*@
                                    <div class="input-group input-group-sm" style="margin-bottom:5px;">
                                        <div class="input-group-prepend">
                                        <span class="input-group-text input-sm" id="LabelFromAddress">From Address </span>
                                        <span class="input-group-text" id="IG_FromAddress" name="IG_FromAddress"></span>
                                        </div>
                                        <input type="text" id="FromAddress" name="FromAddress" class="form-control input-lg clientEntryTerms" maxlength="50" value="@Model.FromAddress" />
                                    </div>

                                    @*TO ADDRESS*@
                                    <div class="input-group input-group-sm" style="margin-bottom:5px;">
                                        <div class="input-group-prepend">
                                        <span class="input-group-text input-sm" id="LabelToAddress">To Address </span>
                                        <span class="input-group-text" id="IG_ToAddress" name="IG_ToAddress"></span>
                                        </div>
                                        @Html.DropDownListFor(model => Model.ToAddress, Model.ContactEmailList, new { @class = "form-control input-sm", @maxlength = 5 })
                                        @*<input type="text" id="ToAddress" name="ToAddress" class="form-control input-lg clientEntryTerms" maxlength="50" />*@
                                    </div>

                                    @*CC ADDRESS*@
                                    <div class="input-group input-group-sm" style="margin-bottom:5px;">
                                        <div class="input-group-prepend">
                                        <span class="input-group-text input-sm" id="LabelCCAddress">CC Address </span>
                                        <span class="input-group-text" id="IG_CCAddress" name="IG_CCAddress"></span>
                                        </div>
                                        @Html.DropDownListFor(model => Model.CcAddress, Model.UserEmailList, new { @class = "form-control input-sm", @maxlength = 5, multiple = "multiple", @style = "height:75px;" })
                                        @*<input type="text" id="CCAddress" name="CCAddress" class="form-control input-lg clientEntryTerms" maxlength="50" />*@
                                    </div>

                                    @*BCC ADDRESS*@
                                    <div class="input-group input-group-sm" style="margin-bottom:5px;">
                                        <div class="input-group-prepend">
                                        <span class="input-group-text input-sm" id="LabelBCCAddress">BCC Address </span>
                                        <span class="input-group-text" id="IG_BCCAddress" name="IG_BCCAddress"></span>
                                        </div>
                                        @Html.DropDownListFor(model => Model.BccAddress, Model.UserEmailList, new { @class = "form-control input-sm", @maxlength = 5, multiple = "multiple", @style = "height:75px;" })
                                        @*<input type="text" id="BCCAddress" name="BCCAddress" class="form-control input-lg clientEntryTerms" maxlength="50" />*@
                                    </div>

                                </div>

                                <div class="col-lg-8" style="padding:5px;" align="left">

                                    @*SUBJECT*@
                                    <div class="input-group input-group-sm" style="margin-bottom:5px;">
                                        <div class="input-group-prepend">
                                        <span class="input-group-text input-sm" id="LabelSubject">Subject </span>
                                        <span class="input-group-text" id="IG_Subject" name="IG_Subject"></span>
                                        </div>
                                        <input type="text" id="Subject" name="Subject" class="form-control input-lg clientEntryTerms" maxlength="50" />
                                    </div>

                                    @*HTML BODY*@
                                    <div class="input-group input-group-sm" style="margin-bottom:5px;">
                                        <div class="input-group-prepend">
                                        <span class="input-group-text input-sm" id="LabelHTMLBody">Body </span>
                                        <span class="input-group-text" id="IG_HTMLBody" name="IG_HTMLBody"></span>
                                        </div>
                                        <textarea rows="50" style="height:350px;" id="HTMLBody" name="HTMLBody" class="form-control input-lg clientEntryTerms" maxlength="5000"></textarea>
                                    </div>
                                    <input type="hidden" id="RelatedTo" value="@Model.RelatedTo" />

                                    <div class="input-group input-group-sm" style="margin-bottom:5px;padding:5px;">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text input-sm" id="LabelUploadFile">Files </span>
                                            <span class="input-group-text requiredClass" id="IG_file" name="IG_file"></span>
                                        </div>
                                        <input type="file" id="files" name="files" class="form-control input-lg" multiple />
                                    </div>

@*
                                    <div class="html-editor"></div>*@

@*
                                    <div class="form-group">
                                        @Html.LabelFor(model => model.RelatedTo, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-10">
                                            @Html.EditorFor(model => model.RelatedTo, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.RelatedTo, "", new { @class = "text-danger" })
                                        </div>
                                    </div>*@
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-lg-12" style="padding:10px;" align="left">
                                    <div class="form-group">
                                            <input type="submit" value="Send Email" class="btn btn-primary btn-lg" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    }

                </div>
            </div>
        </div>
    </div>
</div>



@*<div class="modal fade panel-primary" id="modalUploadClientFiles" tabindex="-1" role="dialog" aria-labelledby="modalUploadClientFiles">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header overviewHeaderNormal">
                <i class="fa fa-paperclip"></i> Attach Files
            </div>
            <div class="modal-body">
                <input type="hidden" name="clientContact_Id" id="clientContact_Id" />

                <form id="SubmitEmailAttachments" name="SubmitEmailAttachments" style="text-align:left;">

                    <div style="padding:10px;">

                        FILE TO UPLOAD 
                        <div class="input-group input-group-sm" style="margin-bottom:5px;padding:5px;">
                            <span class="input-group-addon input-sm" id="LabelUploadFile">Files </span>
                            <span class="input-group-addon requiredClass" id="IG_file" name="IG_file"></span>
                            <input type="file" id="files" name="files" class="form-control input-lg" multiple />
                        </div>

                        <div id="uploadedFileNames" name="uploadedFileNames">
                        </div>

                        <input class="btn btn-primary btn-md" type="submit" value="Upload File" />
                    </div>

                </form>
            </div>
            <div class="modal-footer rightTextAlign">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Dismiss</button>
            </div>
        </div>
    </div>
</div>*@
  
@section Scripts {
        @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
        }

<script src="~/jQuery/devExtremeHTMLEditor.js"></script>
<script src="~/jQuery/jQuery_TableSearch.js"></script>
        }



<script>
    $(document).ready(function () {
        $('[data-toggle="popover"]').popover();
        $('#sendEmailSuccess').hide();

        //var emailSuccess = 'Request["emailStatus"]';
        //if (emailSuccess == "SUCCESS") {
        //    console.log(emailSuccess)
        //    $('#sendEmailSuccess').show();
        //    $('#sendEmailSuccess').delay(4000).fadeOut();
        //}

        $("#files").change(function () {
            console.log(this.files.length);
            $("#uploadedFileNames").addClass("fileUploadFileDisplay");
            $("#uploadedFileNames").append("<b>Files to Upload:</b><br>");
            for (var i = 0; i < this.files.length; i++) {
                //console.log(this.files[i].name);
                $("#uploadedFileNames").append(this.files[i].name + "<br>");
            }
        });

        $("html-editor").change(function () {
            console.log("asdfasd");
        });

    });
</script>


